NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13580  
13581  * Estimate the PTSD imputation model employed by Kessler et al., ;
13582  * and additionally several variations on that model to abstract  ;
13583  * away some of the arbitrariness of their model specification.   ;
13584  ods pdf file = "&outputs/RS2-Eight_Models.pdf";
NOTE: Writing ODS PDF output to DISK destination 
      "C:\Users\Anolinx\MTO\outputs\RS2-Eight_Models.pdf", printer "PDF".
13585  
13586  * This macro allows the PTSD imputation model to be estimated  ;
13587  * with several simple modifications.  Variable AGE may be      ;
13588  * included (as with the original model), or excluded from the  ;
13589  * model specification.  Likewise, RACE (coded as 3 summies in  ;
13590  * the original model) may also be optionally omitted from the  ;
13591  * model.  Finally, the model may be estimated optionally in a  ;
13592  * younger NCSR subset than the 18-85yo cohort originally used. ;
13593  %macro est_ptsd_imput_model(incl_age, incl_race, max_age);
13594  %if &incl_age=1 %then
13595    %do;
13596    %let age_term=age;
13597    %end;
13598  %else
13599    %do;
13600    %let age_term=%str( );
13601    %end;
13602  %if &incl_race=1 %then
13603    %do;
13604    %let race_terms=rhisp rblk roth;
13605    %end;
13606  %else
13607    %do;
13608    %let race_terms=%str( );
13609    %end;
13610  %if &max_age=%str() %then %let max_age=99;
13611  %let suffix=A&incl_age.R&incl_race.S&max_age;
13612  * On the Seattle workstation where this code was prototyped, ;
13613  * SAS-callable SUDAAN is unavailable.  Consequently, we use  ;
13614  * PROC SURVEYLOGISTIC instead of PROC RLOGIST as used by the ;
13615  * original authors in Ptsd-mtoncsr-youth.sas.                ;
13616  * I have found that PROC SURVEYLOGISTIC coefficients match   ;
13617  * those of SUDAAN (invoked at the command line) to the 4th   ;
13618  * decimal place (roughly 1 part in 10^5), and the standard   ;
13619  * errors match to within about 1% in relative terms.         ;
13620  * Thus, whatever differences are introduced by this PROC     ;
13621  * substitution are probably negligible compared with the     ;
13622  * differences between our ICPSR-licensed NCSR data set and   ;
13623  * the (publicly unavailable) raw NCSR data held by Kessler   ;
13624  * and colleagues.                                            ;
13625  proc surveylogistic
13626    varmethod=taylor
13627    data=NCSR.ncsr(keep=DSM_PTS age sexf rhisp rblk roth PT41 PT42 PT43
13628                        PT44 PT45 PT46 PT48 PT50 PT50_1 PT51 PT55
13629                        PT209 PT211 PT212 PT213 PT214 PT233 PT237
13630                        NCSRWTSH NCSRWTLG PTS_SMPL
13631                   where=(pts_smpl=1 and age<=&max_age));
13632    model dsm_pts(event='(1) ENDORSED')
13633                  = &age_term sexf &race_terms PT41 PT42 PT43
13634                    PT44 PT45 PT46 PT48 PT50 PT50_1 PT51 PT55
13635                    PT209 PT211 PT212 PT213 PT214 PT233 PT237
13636          / covb;
13637    weight ncsrwtlg;
13638    ods output CovB=covs&suffix
13639      ParameterEstimates=betas&suffix(keep=Variable Estimate);
13640  run;
13641  %mend est_ptsd_imput_model;
13642  
13643  * Generate a 2x2x2 grid of model results ;
13644  %macro models_grid;
13645  %do age_incl=0 %to 1;
13646    %do race_incl=0 %to 1;
13647      %est_ptsd_imput_model(&age_incl,&race_incl,99);
13648      %est_ptsd_imput_model(&age_incl,&race_incl,40);
13649    %end;
13650  %end;
13651  %mend models_grid;
13652  
13653  %models_grid;
NOTE: The input data set is subset by WHERE, OBS, or FIRSTOBS. This provides a completely 
      separate analysis of the subset. It does not provide a statistically valid subpopulation or 
      domain analysis, where the total number of units in the subpopulation is not known with 
      certainty. If you want a domain analysis, you should include the DOMAIN variables in a 
      DOMAIN statement.
NOTE: PROC SURVEYLOGISTIC is modeling the probability that DSM_PTS='(1) ENDORSED'.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The data set WORK.BETASA0R0S99 has 20 observations and 2 variables.
NOTE: The data set WORK.COVSA0R0S99 has 20 observations and 21 variables.
NOTE: PROCEDURE SURVEYLOGISTIC used (Total process time):
      real time           0.30 seconds
      cpu time            0.15 seconds
      

NOTE: The input data set is subset by WHERE, OBS, or FIRSTOBS. This provides a completely 
      separate analysis of the subset. It does not provide a statistically valid subpopulation or 
      domain analysis, where the total number of units in the subpopulation is not known with 
      certainty. If you want a domain analysis, you should include the DOMAIN variables in a 
      DOMAIN statement.
NOTE: PROC SURVEYLOGISTIC is modeling the probability that DSM_PTS='(1) ENDORSED'.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The data set WORK.BETASA0R0S40 has 20 observations and 2 variables.
NOTE: The data set WORK.COVSA0R0S40 has 20 observations and 21 variables.
NOTE: PROCEDURE SURVEYLOGISTIC used (Total process time):
      real time           0.15 seconds
      cpu time            0.15 seconds
      

NOTE: The input data set is subset by WHERE, OBS, or FIRSTOBS. This provides a completely 
      separate analysis of the subset. It does not provide a statistically valid subpopulation or 
      domain analysis, where the total number of units in the subpopulation is not known with 
      certainty. If you want a domain analysis, you should include the DOMAIN variables in a 
      DOMAIN statement.
NOTE: PROC SURVEYLOGISTIC is modeling the probability that DSM_PTS='(1) ENDORSED'.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The data set WORK.BETASA0R1S99 has 23 observations and 2 variables.
NOTE: The data set WORK.COVSA0R1S99 has 23 observations and 24 variables.
NOTE: PROCEDURE SURVEYLOGISTIC used (Total process time):
      real time           0.26 seconds
      cpu time            0.12 seconds
      

NOTE: The input data set is subset by WHERE, OBS, or FIRSTOBS. This provides a completely 
      separate analysis of the subset. It does not provide a statistically valid subpopulation or 
      domain analysis, where the total number of units in the subpopulation is not known with 
      certainty. If you want a domain analysis, you should include the DOMAIN variables in a 
      DOMAIN statement.
NOTE: PROC SURVEYLOGISTIC is modeling the probability that DSM_PTS='(1) ENDORSED'.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The data set WORK.BETASA0R1S40 has 23 observations and 2 variables.
NOTE: The data set WORK.COVSA0R1S40 has 23 observations and 24 variables.
NOTE: PROCEDURE SURVEYLOGISTIC used (Total process time):
      real time           0.15 seconds
      cpu time            0.15 seconds
      

NOTE: The input data set is subset by WHERE, OBS, or FIRSTOBS. This provides a completely 
      separate analysis of the subset. It does not provide a statistically valid subpopulation or 
      domain analysis, where the total number of units in the subpopulation is not known with 
      certainty. If you want a domain analysis, you should include the DOMAIN variables in a 
      DOMAIN statement.
NOTE: PROC SURVEYLOGISTIC is modeling the probability that DSM_PTS='(1) ENDORSED'.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The data set WORK.BETASA1R0S99 has 21 observations and 2 variables.
NOTE: The data set WORK.COVSA1R0S99 has 21 observations and 22 variables.
NOTE: PROCEDURE SURVEYLOGISTIC used (Total process time):
      real time           0.14 seconds
      cpu time            0.14 seconds
      

NOTE: The input data set is subset by WHERE, OBS, or FIRSTOBS. This provides a completely 
      separate analysis of the subset. It does not provide a statistically valid subpopulation or 
      domain analysis, where the total number of units in the subpopulation is not known with 
      certainty. If you want a domain analysis, you should include the DOMAIN variables in a 
      DOMAIN statement.
NOTE: PROC SURVEYLOGISTIC is modeling the probability that DSM_PTS='(1) ENDORSED'.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The data set WORK.BETASA1R0S40 has 21 observations and 2 variables.
NOTE: The data set WORK.COVSA1R0S40 has 21 observations and 22 variables.
NOTE: PROCEDURE SURVEYLOGISTIC used (Total process time):
      real time           0.13 seconds
      cpu time            0.10 seconds
      

NOTE: The input data set is subset by WHERE, OBS, or FIRSTOBS. This provides a completely 
      separate analysis of the subset. It does not provide a statistically valid subpopulation or 
      domain analysis, where the total number of units in the subpopulation is not known with 
      certainty. If you want a domain analysis, you should include the DOMAIN variables in a 
      DOMAIN statement.
NOTE: PROC SURVEYLOGISTIC is modeling the probability that DSM_PTS='(1) ENDORSED'.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The data set WORK.BETASA1R1S99 has 24 observations and 2 variables.
NOTE: The data set WORK.COVSA1R1S99 has 24 observations and 25 variables.
NOTE: PROCEDURE SURVEYLOGISTIC used (Total process time):
      real time           0.15 seconds
      cpu time            0.14 seconds
      

NOTE: The input data set is subset by WHERE, OBS, or FIRSTOBS. This provides a completely 
      separate analysis of the subset. It does not provide a statistically valid subpopulation or 
      domain analysis, where the total number of units in the subpopulation is not known with 
      certainty. If you want a domain analysis, you should include the DOMAIN variables in a 
      DOMAIN statement.
NOTE: PROC SURVEYLOGISTIC is modeling the probability that DSM_PTS='(1) ENDORSED'.
NOTE: Convergence criterion (GCONV=1E-8) satisfied.
NOTE: The data set WORK.BETASA1R1S40 has 24 observations and 2 variables.
NOTE: The data set WORK.COVSA1R1S40 has 24 observations and 25 variables.
NOTE: PROCEDURE SURVEYLOGISTIC used (Total process time):
      real time           0.15 seconds
      cpu time            0.12 seconds
      

13654  ods pdf close;
NOTE: ODS PDF printed 40 pages to C:\Users\Anolinx\MTO\outputs\RS2-Eight_Models.pdf.
13655  
13656  /* end of STEP II */
13657  
13658  /*  STEP III -- Compare coefficients
13659   ************************************/
13660   *        add/remove forward slash --^ ;
13661   *        to enable/disable STEP III   ;
13662  
13663  PROC PRINTTO NEW
13664    LOG="&outputs/RS3.log";
13665  RUN;

