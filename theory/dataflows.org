* MTO data flow diagram
#+BEGIN_SRC dot :file dataflow.pdf :exports results :cmdline -Tpdf:cairo
digraph g {
  node [fontname="Courier"]
  preimp [label=<<b>Mto_jama_preimp<br/>_20160111.sas7bdat</b><br/>(from NBER)> fontname="Courier"]
  preimp_xwalk [label=preimp_xwalk]
  pred_ptsd_youth [label=pred_ptsd_youth]
  preimp -> preimp_xwalk [label=<<b>%mtoptsd(Mto_jama_preimp..sas,<br/>Y,preimp_xwalk);</b>> fontname="Courier"]
  preimp_xwalk -> pred_ptsd_youth [label="data pred_ptsd_youth;\l  set preimp_xwalk;\l  Age = f_svy_age_iw;\l  SEXF = 1-x_f_ch_male;\l  RHISP = hisp_any;\l  RBLK = nonhisp_black;\l  ROTH = nonhisp_other;\l  pred_prob = exp(&formula)/(1+exp(&formula));\lrun;\l" fontname="Courier"]
  pred_ptsd_youth -> fnlpred_ptsd_youth [label="data fnlpred_ptsd_youth;\l  set pred_ptsd_youth;\l  ptsd_random = ranuni(1234567);\l  if mto_ptsd_sample = 1 and\l    0 < ptsd_random <= pred_prob\l  then f_mh_pts_evr_yt = 1;\l  else f_mh_pts_evr_yt = 0;\l  ... /* calculate recency */\lrun;\l" fontname="Courier"]
  preimp -> fnlpred_ptsd_youth [label="code from\n'Ptsd_MTO_youth.sas'" fontname="Courier" style="dotted"]
  fnlpred_ptsd_youth -> mto_jama_imputed [label="1_mto_jama_impute_data_20160111.sas" fontname="Courier"]
  mto_jama_imputed -> OddsRatios [label="/* from 'MTO_table4_alt.sas' */\lPROC SURVEYLOGISTIC DATA = &imputed ;\l  STRATA ra_site; CLUSTER f_svy_bl_tract_masked_id;\l  DOMAIN _imputation_;\l  MODEL &dep (EVENT='1') = &controls / COVB;\l  WEIGHT f_wt_totsvy ;\l  ODS OUTPUT parameterestimates=parmest\l  OddsRatios = ors;\lRUN;\l" fontname="Courier"]
}
#+END_SRC

#+RESULTS:
[[file:dataflow.pdf]]

